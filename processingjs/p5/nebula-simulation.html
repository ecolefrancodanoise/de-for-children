<html>
<head>
<script language="javascript" type="text/javascript" src="p5.js"></script>
</head>

<body>
<script>
    
var atoms = [];
for (var i = 0; i < 1000; i+=1) {
    atoms.push (
        {
            size:Math.random()*7,
            x:Math.random()*1270,
            y:Math.random()*600,
            xp:0,
            yp:0,
            m:1e3
        }
    );
}
console.log(Math.random()*800)
var dt =0.1;
var G = 1;

var newPosition=function(b, allAtoms) {

    var xpp = 0;
    var ypp = 0;
    for (var i = 0; i < allAtoms.length; i+=1) {
        var b1 = allAtoms[i];
        if (b === b1) {
            continue;
        }
        var d1=Math.sqrt((b1.x-b.x)*(b1.x-b.x) + (b1.y -b.y)*(b1.y -b.y));
        xpp += -G*b1.m*(b.x-b1.x)/Math.pow(d1, 3);
        ypp += -G*b1.m*(b.y-b1.y)/Math.pow(d1, 3);
    }

    b.yp=b.yp+ypp*dt;
    b.xp=b.xp+xpp*dt;
    b.x=b.x+b.xp*dt;
    b.y=b.y+b.yp*dt;
    return b;
};

var setup = function() {
    createCanvas(1280, 600);
}

draw = function() {
    background(0,0,0);

    for (var i = 0; i < atoms.length; i++) {
        ellipse(atoms[i].x, atoms[i].y, atoms[i].size , atoms[i].size);
        atoms[i]=newPosition(atoms[i], atoms);
    }
};

</script>
</body>
</html>
